# LDO — Let's Do It

Персональная фитнес-платформа на **HTML**, **CSS**, **JavaScript** и **PHP**.

## Стек

- **PHP** — серверная логика, авторизация, БД, роутинг
- **HTML** — разметка страниц (в PHP-шаблонах)
- **CSS** — стили (чёрно-жёлтая тема)
- **JavaScript** — валидация форм, графики, интерактивность

## Установка (XAMPP)

1. Клонируйте или скопируйте проект в `C:\xampp\htdocs\LDO web-site\`.

2. Создайте БД и примените схему:
   ```bash
   mysql -u root < db/schema.sql
   ```
   Или откройте phpMyAdmin, создайте БД `ldo`, скопируйте и выполните содержимое `db/schema.sql`.

3. Настройте `app/config.php` при необходимости:
   - `DB_HOST`, `DB_NAME`, `DB_USER`, `DB_PASS` — параметры MySQL
   - `DEV_SHOW_RESET_LINK` — показывать ссылку сброса пароля на экране (для разработки)

4. Создайте первого администратора:
   - **Через браузер**: откройте `http://localhost/LDO web-site/create_admin.php`
   - **Через командную строку**: `php create_admin.php`
   
   По умолчанию создаётся: `admin@ldo.local` / `admin123`

## Запуск

Откройте в браузере:

```
http://localhost/LDO%20web-site/
```

или

```
http://localhost/LDO web-site/
```

## Безопасность

- Пароли хэшируются через `bcrypt` (`password_hash` / `password_verify`)
- Защита от CSRF — токен в формах
- Подготовленные запросы (PDO) — защита от SQL-инъекций
- `htmlspecialchars` при выводе — защита от XSS
- Валидация email и минимальная длина пароля (8 символов)

## Структура

```
LDO web-site/
├── index.php          # Точка входа, роутинг
├── app/
│   ├── bootstrap.php  # Инициализация, сессии, подгрузка библиотек
│   ├── config.php     # Настройки
│   ├── lib/           # PHP-библиотеки (auth, db, helpers, kbju и т.д.)
│   ├── routes/        # Обработчики страниц
│   └── views/         # HTML-шаблоны
├── assets/
│   ├── css/ldo.css
│   └── js/main.js
└── db/schema.sql
```

## Дополнительно

- **Аватар** — загрузка в профиле (JPG, PNG, GIF, WebP, до 2 МБ). Хранятся в `uploads/avatars/`
- **Миграции** — для существующей БД:
  - `mysql -u root ldo < db/migrations/001_avatar_and_diary.sql` (аватар и дневник)
  - `mysql -u root ldo < db/migrations/002_articles_media.sql` (медиа в статьях)
  - `mysql -u root ldo < db/migrations/003_diary_food.sql` (детальный дневник и питание)
- **Медиа на главной** — отредактируйте `config/home_media.php`, добавьте пути к изображениям/видео/GIF. Папки: `assets/images/home/` и `uploads/home/`
  - Для GIF на задний фон: установите `'type' => 'gif'` в первом элементе массива `$HOME_MEDIA`

## Модули

- Регистрация, вход, выход, восстановление пароля
- Личный кабинет (профиль, рост, вес, возраст, пол, активность, цель)
- Калькулятор КБЖУ
- Программы тренировок (просмотр)
- Справочник упражнений
- Дневник тренировок:
  - Детальное описание тренировок (длительность, самочувствие, вес тела)
  - Упражнения с весом, подходами и повторениями
  - Учёт питания с автоматическим подсчётом калорий и БЖУ
  - База продуктов (15 популярных продуктов уже добавлены)
  - Группировка приёмов пищи по типам (завтрак, обед, ужин, перекус)
- Прогресс (график веса)
- Статьи
- Админ-панель (расширенная):
  - Управление пользователями (блокировка, удаление)
  - Управление программами тренировок
  - Управление упражнениями
  - Управление статьями с медиа (обложка, видео)
